# AGENTS

- 作者：GaoZheng
- 日期：2025-10-13

#### ***注：“O3理论/O3元数学理论/主纤维丛版广义非交换李代数(PFB-GNLA)”相关理论参见： [作者（GaoZheng）网盘分享](https://drive.google.com/drive/folders/1lrgVtvhEq8cNal0Aa0AjeCNQaRA8WERu?usp=sharing) 或 [作者（GaoZheng）主页](https://mymetamathematics.blogspot.com)***

﻿# my_docs 开发协议（规范）

注：O3 理论/主纤维丛版广义非交换李代数（PFB-GNLA）等相关理论参见作者网盘与主页。

## 目的与范围
- 适用目录：`my_docs`（含 `dev_docs` 与 `project_docs`）。
- 目标：统一文档结构、命名、索引与自动化脚本行为，兼顾可读性与可生成性。

## 文档结构规范（更新/强制）
- 顶部固定结构（依次、缺一不可）：
  1) `# {标题}`（不含时间戳）
  2) `- 作者：{姓名}`
  3) `- 日期：YYYY-MM-DD`
  4) `#### ***注：…***`（如触发 O3 关键词）
  5) `## 摘要`（180–240 字，可自动生成）
- 间距要求：以上各部分之间均为 1 个空行（单空行）。

## 摘要使用优先级（MUST/SHOULD）
- [必须/MUST] 原文包含“摘要”时，`## 摘要` 必须直接采用原文摘要，不得改写。
- [应当/SHOULD] 原文摘要若以非标准形式出现（如“#### 摘要”或“摘要：”），由脚本自动合并为顶部标准 `## 摘要` 段。
- [应当/SHOULD] 仅在缺失时才自动生成简要摘要（180–240 字）。

## 头部间距规范（MUST）
- 标题 ↔ 作者/日期：1 个空行。
- 作者/日期 ↔ 注释：1 个空行（如注释存在）。
- 注释 ↔ `## 摘要`：1 个空行。
- 对齐脚本自动落实上述间距并幂等。

## 文档命名与时间戳规范（MUST/SHOULD）
- [必须/MUST] 文件名：`{10位Unix时间戳}_{文章标题}.md`（10 位前缀同时为文档 ID）。
- [必须/MUST] 同秒冲突：按“标题名”字典序升序，首项保留时间戳，其余依次向前回退 1 秒（-1s、-2s…）。
- [必须/MUST] 重命名后，同步更新头部 `- 作者/日期`。
- [应当/SHOULD] 自动执行且幂等；兼容旧日期格式，历史特殊前缀按脚本配置保留。

## 文件名与标题一致性（MUST）
- 标题行不得包含时间戳；标题应为纯“文章标题”。
- 若检测到 `# {10位时间戳}_{标题}`，必须移除前缀。

## 索引生成规范（MUST/SHOULD）
- [必须/MUST] `my_docs/README.md` 的 `## project_docs` 列表按文件名 10 位时间戳升序。
- [应当/SHOULD] 同秒时按标题名字典序升序；长摘要（>120 字符）换行并以两个空格缩进。
- [应当/SHOULD] 由 `my_scripts/gen_my_docs_index.py` 自动生成。

## 临时文件与清理（MUST）
- 临时文件定义：为调试/中间态生成的文件（如 `tmp_gen_idx_before.txt`、`tmp_*.txt`、`*.tmp`、`*.bak` 等）。
- 约束：
  - 不得提交到仓库；完成任务后必须及时删除。
  - 若确需保留样例，应移入文档目录并转为正式说明文件（带标题/作者/日期/摘要）。
  - 建议在 `.gitignore` 中加入通用忽略规则（例如：`tmp_*`, `*.tmp`, `*.bak`）。

## 自动化脚本
- `align_my_documents.py`：
  - 规范文件名时间戳唯一性；
  - 生成/纠正作者与日期（YYYY-MM-DD）；
  - 识别 O3 关键词并在日期后插入注释行；
  - 清理正文中重复的“### 标题/#### 摘要”，并合并为顶部结构；
  - 规范标题/作者/日期/注释/摘要间距为单空行；
  - 移除 H1 中的时间戳前缀（若出现）。
- `gen_my_docs_index.py`：
  - 生成 `my_docs/README.md`；
  - 输出为 UTF-8 with BOM，避免 Windows 环境中文乱码；
  - project_docs 按时间戳升序排序，长摘要换行缩进。
- `ensure_summaries.py`：
  - 在缺失时自动补齐 `## 摘要` 段落（不覆盖已有摘要）。

## 目录与权限
- `my_docs/project_docs`：项目知识库（允许脚本写入）。
- `my_docs/project_docs/kernel_reference`：外部知识参考（只读、索引中提示）。

（本规范随仓库演进而更新）
